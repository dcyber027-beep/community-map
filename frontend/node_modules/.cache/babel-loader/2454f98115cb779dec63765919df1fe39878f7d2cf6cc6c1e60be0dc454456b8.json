{"ast":null,"code":"import React,{useState}from'react';import{ChevronDown,ChevronUp}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ListView=_ref=>{let{incidents,getCategoryEmoji}=_ref;const[expandedId,setExpandedId]=useState(null);const getTimeAgo=date=>{const seconds=Math.floor((new Date()-new Date(date))/1000);if(seconds<60)return'Just now';if(seconds<3600)return\"\".concat(Math.floor(seconds/60),\" min ago\");if(seconds<86400)return\"\".concat(Math.floor(seconds/3600),\" hr ago\");return\"\".concat(Math.floor(seconds/86400),\" days ago\");};const getUrgencyColor=urgency=>{const colors={low:'bg-emerald-100 text-emerald-700 border-emerald-300',medium:'bg-amber-100 text-amber-700 border-amber-300',high:'bg-rose-100 text-rose-700 border-rose-300'};return colors[urgency]||'bg-slate-100 text-slate-700 border-slate-300';};const sortedIncidents=[...incidents].sort((a,b)=>new Date(b.timestamp)-new Date(a.timestamp));if(incidents.length===0){return/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"list-view\",className:\"flex items-center justify-center h-96\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDDFA\\uFE0F\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-slate-700 mb-2\",children:\"No Incidents Reported\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-500\",children:\"The area is clear. Be the first to report if you see something.\"})]})});}return/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"list-view\",className:\"p-6 max-h-[600px] overflow-y-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:sortedIncidents.map(incident=>/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"incident-\".concat(incident.id),className:\"bg-white border border-slate-200 rounded-xl p-4 hover:shadow-lg transition-all\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3 flex-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl\",children:getCategoryEmoji(incident.category)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-slate-900\",children:incident.category.toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-semibold border \".concat(getUrgencyColor(incident.urgency)),children:incident.urgency.toUpperCase()}),incident.is_verified?/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700 border border-emerald-300\",children:\"\\u2713 Verified\"}):/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-700 border border-amber-300\",children:\"\\u26A0 Unverified\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 text-sm text-slate-600 mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{children:getTimeAgo(incident.timestamp)}),incident.cluster_count>1&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-rose-600 font-semibold\",children:[incident.cluster_count,\" reports in area\"]})]}),expandedId===incident.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t border-slate-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-slate-700\",children:incident.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 text-xs text-slate-500\",children:[\"Location: \",incident.latitude.toFixed(4),\", \",incident.longitude.toFixed(4)]})]})]})]}),/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"expand-incident-\".concat(incident.id),onClick:()=>setExpandedId(expandedId===incident.id?null:incident.id),className:\"ml-2 p-2 hover:bg-slate-100 rounded-lg transition-colors\",children:expandedId===incident.id?/*#__PURE__*/_jsx(ChevronUp,{className:\"w-5 h-5 text-slate-600\"}):/*#__PURE__*/_jsx(ChevronDown,{className:\"w-5 h-5 text-slate-600\"})})]})},incident.id))})});};export default ListView;","map":{"version":3,"names":["React","useState","ChevronDown","ChevronUp","jsx","_jsx","jsxs","_jsxs","ListView","_ref","incidents","getCategoryEmoji","expandedId","setExpandedId","getTimeAgo","date","seconds","Math","floor","Date","concat","getUrgencyColor","urgency","colors","low","medium","high","sortedIncidents","sort","a","b","timestamp","length","className","children","map","incident","id","category","toUpperCase","is_verified","cluster_count","description","latitude","toFixed","longitude","onClick"],"sources":["/app/frontend/src/components/ListView.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { ChevronDown, ChevronUp } from 'lucide-react';\n\nconst ListView = ({ incidents, getCategoryEmoji }) => {\n  const [expandedId, setExpandedId] = useState(null);\n\n  const getTimeAgo = (date) => {\n    const seconds = Math.floor((new Date() - new Date(date)) / 1000);\n    \n    if (seconds < 60) return 'Just now';\n    if (seconds < 3600) return `${Math.floor(seconds / 60)} min ago`;\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)} hr ago`;\n    return `${Math.floor(seconds / 86400)} days ago`;\n  };\n\n  const getUrgencyColor = (urgency) => {\n    const colors = {\n      low: 'bg-emerald-100 text-emerald-700 border-emerald-300',\n      medium: 'bg-amber-100 text-amber-700 border-amber-300',\n      high: 'bg-rose-100 text-rose-700 border-rose-300'\n    };\n    return colors[urgency] || 'bg-slate-100 text-slate-700 border-slate-300';\n  };\n\n  const sortedIncidents = [...incidents].sort((a, b) => \n    new Date(b.timestamp) - new Date(a.timestamp)\n  );\n\n  if (incidents.length === 0) {\n    return (\n      <div data-testid=\"list-view\" className=\"flex items-center justify-center h-96\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\">üó∫Ô∏è</div>\n          <h3 className=\"text-xl font-semibold text-slate-700 mb-2\">No Incidents Reported</h3>\n          <p className=\"text-slate-500\">The area is clear. Be the first to report if you see something.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div data-testid=\"list-view\" className=\"p-6 max-h-[600px] overflow-y-auto\">\n      <div className=\"space-y-4\">\n        {sortedIncidents.map((incident) => (\n          <div\n            key={incident.id}\n            data-testid={`incident-${incident.id}`}\n            className=\"bg-white border border-slate-200 rounded-xl p-4 hover:shadow-lg transition-all\"\n          >\n            <div className=\"flex items-start justify-between\">\n              <div className=\"flex items-start space-x-3 flex-1\">\n                <div className=\"text-3xl\">{getCategoryEmoji(incident.category)}</div>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <h3 className=\"text-lg font-bold text-slate-900\">\n                      {incident.category.toUpperCase()}\n                    </h3>\n                    <span className={`px-2 py-1 rounded-full text-xs font-semibold border ${getUrgencyColor(incident.urgency)}`}>\n                      {incident.urgency.toUpperCase()}\n                    </span>\n                    {incident.is_verified ? (\n                      <span className=\"px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700 border border-emerald-300\">\n                        ‚úì Verified\n                      </span>\n                    ) : (\n                      <span className=\"px-2 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-700 border border-amber-300\">\n                        ‚ö† Unverified\n                      </span>\n                    )}\n                  </div>\n                  \n                  <div className=\"flex items-center gap-4 text-sm text-slate-600 mb-2\">\n                    <span>{getTimeAgo(incident.timestamp)}</span>\n                    {incident.cluster_count > 1 && (\n                      <span className=\"text-rose-600 font-semibold\">\n                        {incident.cluster_count} reports in area\n                      </span>\n                    )}\n                  </div>\n\n                  {expandedId === incident.id && (\n                    <div className=\"mt-3 pt-3 border-t border-slate-200\">\n                      <p className=\"text-slate-700\">{incident.description}</p>\n                      <div className=\"mt-2 text-xs text-slate-500\">\n                        Location: {incident.latitude.toFixed(4)}, {incident.longitude.toFixed(4)}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              <button\n                data-testid={`expand-incident-${incident.id}`}\n                onClick={() => setExpandedId(expandedId === incident.id ? null : incident.id)}\n                className=\"ml-2 p-2 hover:bg-slate-100 rounded-lg transition-colors\"\n              >\n                {expandedId === incident.id ? (\n                  <ChevronUp className=\"w-5 h-5 text-slate-600\" />\n                ) : (\n                  <ChevronDown className=\"w-5 h-5 text-slate-600\" />\n                )}\n              </button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default ListView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}