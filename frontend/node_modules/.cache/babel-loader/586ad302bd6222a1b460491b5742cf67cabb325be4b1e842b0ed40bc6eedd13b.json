{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import L from'leaflet';import'leaflet/dist/leaflet.css';import{MapPin}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MapView=_ref=>{let{incidents,userLocation,getCategoryEmoji,onMapClick}=_ref;const mapRef=useRef(null);const mapInstanceRef=useRef(null);const markersRef=useRef([]);const draggableMarkerRef=useRef(null);const[showPinHelper,setShowPinHelper]=useState(true);useEffect(()=>{// Initialize map only once\nif(!mapInstanceRef.current&&mapRef.current){// Default to Melbourne CBD\nconst defaultCenter=[-37.8136,144.9631];mapInstanceRef.current=L.map(mapRef.current).setView(defaultCenter,13);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'¬© OpenStreetMap contributors',maxZoom:19}).addTo(mapInstanceRef.current);// Add draggable pin for reporting\nconst pinIcon=L.divIcon({className:'draggable-pin-marker',html:\"\\n          <div style=\\\"\\n            position: relative;\\n            width: 40px;\\n            height: 50px;\\n          \\\">\\n            <div style=\\\"\\n              position: absolute;\\n              bottom: 0;\\n              left: 50%;\\n              transform: translateX(-50%);\\n              width: 0;\\n              height: 0;\\n              border-left: 20px solid transparent;\\n              border-right: 20px solid transparent;\\n              border-top: 40px solid #3b82f6;\\n              filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));\\n            \\\"></div>\\n            <div style=\\\"\\n              position: absolute;\\n              top: 0;\\n              left: 50%;\\n              transform: translateX(-50%);\\n              background: white;\\n              width: 30px;\\n              height: 30px;\\n              border-radius: 50%;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              font-size: 20px;\\n              border: 3px solid #3b82f6;\\n              box-shadow: 0 2px 8px rgba(0,0,0,0.2);\\n            \\\">\\uD83D\\uDCCD</div>\\n          </div>\\n        \",iconSize:[40,50],iconAnchor:[20,50]});draggableMarkerRef.current=L.marker(defaultCenter,{icon:pinIcon,draggable:true,autoPan:true}).addTo(mapInstanceRef.current);draggableMarkerRef.current.bindPopup('<b>Drag me to report location</b><br/>Double-click to open report form',{offset:[0,-40]}).openPopup();// Double-click to open report form\ndraggableMarkerRef.current.on('dblclick',()=>{const pos=draggableMarkerRef.current.getLatLng();if(onMapClick){onMapClick(pos.lat,pos.lng);}});// Update popup on drag\ndraggableMarkerRef.current.on('dragend',()=>{const pos=draggableMarkerRef.current.getLatLng();draggableMarkerRef.current.getPopup().setContent(\"<b>Location selected</b><br/>Lat: \".concat(pos.lat.toFixed(4),\", Lng: \").concat(pos.lng.toFixed(4),\"<br/>Double-click to report\"));setTimeout(()=>setShowPinHelper(false),3000);});}// Clear existing markers\nmarkersRef.current.forEach(marker=>marker.remove());markersRef.current=[];// Add user location marker\nif(userLocation&&mapInstanceRef.current){const userMarker=L.marker([userLocation.latitude,userLocation.longitude],{icon:L.divIcon({className:'custom-user-marker',html:\"<div style=\\\"background-color: #3b82f6; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);\\\"></div>\",iconSize:[16,16],iconAnchor:[8,8]})});userMarker.bindPopup('<b>Your Location</b>');userMarker.addTo(mapInstanceRef.current);markersRef.current.push(userMarker);// Add 500m radius circle\nconst circle=L.circle([userLocation.latitude,userLocation.longitude],{color:'#3b82f6',fillColor:'#3b82f6',fillOpacity:0.1,radius:500}).addTo(mapInstanceRef.current);markersRef.current.push(circle);}// Add incident markers\nincidents.forEach(incident=>{const urgencyColors={low:'#10b981',medium:'#f59e0b',high:'#ef4444'};const emoji=getCategoryEmoji(incident.category);const color=urgencyColors[incident.urgency]||'#6b7280';const marker=L.marker([incident.latitude,incident.longitude],{icon:L.divIcon({className:'custom-incident-marker',html:\"\\n            <div style=\\\"\\n              background-color: \".concat(color,\";\\n              width: 40px;\\n              height: 40px;\\n              border-radius: 50%;\\n              display: flex;\\n              align-items: center;\\n              justify-content: center;\\n              border: 3px solid white;\\n              box-shadow: 0 4px 12px rgba(0,0,0,0.3);\\n              font-size: 20px;\\n              cursor: pointer;\\n              transition: transform 0.2s;\\n            \\\">\").concat(emoji,\"</div>\\n          \"),iconSize:[40,40],iconAnchor:[20,20]})});const timeAgo=getTimeAgo(new Date(incident.timestamp));const verifiedBadge=incident.is_verified?'<span style=\"color: #10b981; font-weight: bold;\">‚úì Verified</span>':'<span style=\"color: #f59e0b;\">‚ö† Unverified</span>';const clusterInfo=incident.cluster_count>1?\"<br><span style=\\\"color: #ef4444; font-weight: bold;\\\">\".concat(incident.cluster_count,\" reports in this area</span>\"):'';marker.bindPopup(\"\\n        <div style=\\\"min-width: 200px;\\\">\\n          <div style=\\\"font-size: 18px; margin-bottom: 8px;\\\">\".concat(emoji,\" <b>\").concat(incident.category.toUpperCase(),\"</b></div>\\n          <div style=\\\"margin-bottom: 4px;\\\"><b>Urgency:</b> <span style=\\\"color: \").concat(color,\"; font-weight: bold;\\\">\").concat(incident.urgency.toUpperCase(),\"</span></div>\\n          <div style=\\\"margin-bottom: 4px;\\\"><b>Status:</b> \").concat(verifiedBadge,\"</div>\\n          <div style=\\\"margin-bottom: 8px;\\\"><b>Time:</b> \").concat(timeAgo,\"</div>\\n          <div style=\\\"border-top: 1px solid #e5e7eb; padding-top: 8px; margin-top: 8px;\\\">\").concat(incident.description,\"</div>\\n          \").concat(clusterInfo,\"\\n        </div>\\n      \"));marker.addTo(mapInstanceRef.current);markersRef.current.push(marker);});// Auto-center map if there are incidents\nif(incidents.length>0&&mapInstanceRef.current){const bounds=L.latLngBounds(incidents.map(i=>[i.latitude,i.longitude]));if(userLocation){bounds.extend([userLocation.latitude,userLocation.longitude]);}mapInstanceRef.current.fitBounds(bounds,{padding:[50,50]});}else if(userLocation&&mapInstanceRef.current){mapInstanceRef.current.setView([userLocation.latitude,userLocation.longitude],14);}return()=>{// Cleanup on unmount only\nif(mapInstanceRef.current){markersRef.current.forEach(marker=>marker.remove());}};},[incidents,userLocation]);const getTimeAgo=date=>{const seconds=Math.floor((new Date()-date)/1000);if(seconds<60)return'Just now';if(seconds<3600)return\"\".concat(Math.floor(seconds/60),\" min ago\");if(seconds<86400)return\"\".concat(Math.floor(seconds/3600),\" hr ago\");return\"\".concat(Math.floor(seconds/86400),\" days ago\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[showPinHelper&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-4 left-1/2 transform -translate-x-1/2 z-[1000] bg-blue-600 text-white px-6 py-3 rounded-lg shadow-xl flex items-center gap-3 animate-bounce\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:\"Drag the blue pin \\uD83D\\uDCCD to your location, then double-click to report\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowPinHelper(false),className:\"ml-2 hover:bg-blue-700 rounded px-2 py-1\",children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{\"data-testid\":\"map-view\",ref:mapRef,style:{height:'600px',width:'100%'}})]});};export default MapView;","map":{"version":3,"names":["React","useEffect","useRef","useState","L","MapPin","jsx","_jsx","jsxs","_jsxs","MapView","_ref","incidents","userLocation","getCategoryEmoji","onMapClick","mapRef","mapInstanceRef","markersRef","draggableMarkerRef","showPinHelper","setShowPinHelper","current","defaultCenter","map","setView","tileLayer","attribution","maxZoom","addTo","pinIcon","divIcon","className","html","iconSize","iconAnchor","marker","icon","draggable","autoPan","bindPopup","offset","openPopup","on","pos","getLatLng","lat","lng","getPopup","setContent","concat","toFixed","setTimeout","forEach","remove","userMarker","latitude","longitude","push","circle","color","fillColor","fillOpacity","radius","incident","urgencyColors","low","medium","high","emoji","category","urgency","timeAgo","getTimeAgo","Date","timestamp","verifiedBadge","is_verified","clusterInfo","cluster_count","toUpperCase","description","length","bounds","latLngBounds","i","extend","fitBounds","padding","date","seconds","Math","floor","children","onClick","ref","style","height","width"],"sources":["/app/frontend/src/components/MapView.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { MapPin } from 'lucide-react';\n\nconst MapView = ({ incidents, userLocation, getCategoryEmoji, onMapClick }) => {\n  const mapRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const markersRef = useRef([]);\n  const draggableMarkerRef = useRef(null);\n  const [showPinHelper, setShowPinHelper] = useState(true);\n\n  useEffect(() => {\n    // Initialize map only once\n    if (!mapInstanceRef.current && mapRef.current) {\n      // Default to Melbourne CBD\n      const defaultCenter = [-37.8136, 144.9631];\n      \n      mapInstanceRef.current = L.map(mapRef.current).setView(defaultCenter, 13);\n\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '¬© OpenStreetMap contributors',\n        maxZoom: 19\n      }).addTo(mapInstanceRef.current);\n\n      // Add draggable pin for reporting\n      const pinIcon = L.divIcon({\n        className: 'draggable-pin-marker',\n        html: `\n          <div style=\"\n            position: relative;\n            width: 40px;\n            height: 50px;\n          \">\n            <div style=\"\n              position: absolute;\n              bottom: 0;\n              left: 50%;\n              transform: translateX(-50%);\n              width: 0;\n              height: 0;\n              border-left: 20px solid transparent;\n              border-right: 20px solid transparent;\n              border-top: 40px solid #3b82f6;\n              filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3));\n            \"></div>\n            <div style=\"\n              position: absolute;\n              top: 0;\n              left: 50%;\n              transform: translateX(-50%);\n              background: white;\n              width: 30px;\n              height: 30px;\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              font-size: 20px;\n              border: 3px solid #3b82f6;\n              box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n            \">üìç</div>\n          </div>\n        `,\n        iconSize: [40, 50],\n        iconAnchor: [20, 50]\n      });\n\n      draggableMarkerRef.current = L.marker(defaultCenter, {\n        icon: pinIcon,\n        draggable: true,\n        autoPan: true\n      }).addTo(mapInstanceRef.current);\n\n      draggableMarkerRef.current.bindPopup(\n        '<b>Drag me to report location</b><br/>Double-click to open report form',\n        { offset: [0, -40] }\n      ).openPopup();\n\n      // Double-click to open report form\n      draggableMarkerRef.current.on('dblclick', () => {\n        const pos = draggableMarkerRef.current.getLatLng();\n        if (onMapClick) {\n          onMapClick(pos.lat, pos.lng);\n        }\n      });\n\n      // Update popup on drag\n      draggableMarkerRef.current.on('dragend', () => {\n        const pos = draggableMarkerRef.current.getLatLng();\n        draggableMarkerRef.current.getPopup().setContent(\n          `<b>Location selected</b><br/>Lat: ${pos.lat.toFixed(4)}, Lng: ${pos.lng.toFixed(4)}<br/>Double-click to report`\n        );\n        setTimeout(() => setShowPinHelper(false), 3000);\n      });\n    }\n\n    // Clear existing markers\n    markersRef.current.forEach(marker => marker.remove());\n    markersRef.current = [];\n\n    // Add user location marker\n    if (userLocation && mapInstanceRef.current) {\n      const userMarker = L.marker([userLocation.latitude, userLocation.longitude], {\n        icon: L.divIcon({\n          className: 'custom-user-marker',\n          html: `<div style=\"background-color: #3b82f6; width: 16px; height: 16px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 8px rgba(0,0,0,0.3);\"></div>`,\n          iconSize: [16, 16],\n          iconAnchor: [8, 8]\n        })\n      });\n      userMarker.bindPopup('<b>Your Location</b>');\n      userMarker.addTo(mapInstanceRef.current);\n      markersRef.current.push(userMarker);\n\n      // Add 500m radius circle\n      const circle = L.circle([userLocation.latitude, userLocation.longitude], {\n        color: '#3b82f6',\n        fillColor: '#3b82f6',\n        fillOpacity: 0.1,\n        radius: 500\n      }).addTo(mapInstanceRef.current);\n      markersRef.current.push(circle);\n    }\n\n    // Add incident markers\n    incidents.forEach(incident => {\n      const urgencyColors = {\n        low: '#10b981',\n        medium: '#f59e0b',\n        high: '#ef4444'\n      };\n\n      const emoji = getCategoryEmoji(incident.category);\n      const color = urgencyColors[incident.urgency] || '#6b7280';\n\n      const marker = L.marker([incident.latitude, incident.longitude], {\n        icon: L.divIcon({\n          className: 'custom-incident-marker',\n          html: `\n            <div style=\"\n              background-color: ${color};\n              width: 40px;\n              height: 40px;\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              border: 3px solid white;\n              box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n              font-size: 20px;\n              cursor: pointer;\n              transition: transform 0.2s;\n            \">${emoji}</div>\n          `,\n          iconSize: [40, 40],\n          iconAnchor: [20, 20]\n        })\n      });\n\n      const timeAgo = getTimeAgo(new Date(incident.timestamp));\n      const verifiedBadge = incident.is_verified ? '<span style=\"color: #10b981; font-weight: bold;\">‚úì Verified</span>' : '<span style=\"color: #f59e0b;\">‚ö† Unverified</span>';\n      const clusterInfo = incident.cluster_count > 1 ? `<br><span style=\"color: #ef4444; font-weight: bold;\">${incident.cluster_count} reports in this area</span>` : '';\n\n      marker.bindPopup(`\n        <div style=\"min-width: 200px;\">\n          <div style=\"font-size: 18px; margin-bottom: 8px;\">${emoji} <b>${incident.category.toUpperCase()}</b></div>\n          <div style=\"margin-bottom: 4px;\"><b>Urgency:</b> <span style=\"color: ${color}; font-weight: bold;\">${incident.urgency.toUpperCase()}</span></div>\n          <div style=\"margin-bottom: 4px;\"><b>Status:</b> ${verifiedBadge}</div>\n          <div style=\"margin-bottom: 8px;\"><b>Time:</b> ${timeAgo}</div>\n          <div style=\"border-top: 1px solid #e5e7eb; padding-top: 8px; margin-top: 8px;\">${incident.description}</div>\n          ${clusterInfo}\n        </div>\n      `);\n\n      marker.addTo(mapInstanceRef.current);\n      markersRef.current.push(marker);\n    });\n\n    // Auto-center map if there are incidents\n    if (incidents.length > 0 && mapInstanceRef.current) {\n      const bounds = L.latLngBounds(incidents.map(i => [i.latitude, i.longitude]));\n      if (userLocation) {\n        bounds.extend([userLocation.latitude, userLocation.longitude]);\n      }\n      mapInstanceRef.current.fitBounds(bounds, { padding: [50, 50] });\n    } else if (userLocation && mapInstanceRef.current) {\n      mapInstanceRef.current.setView([userLocation.latitude, userLocation.longitude], 14);\n    }\n\n    return () => {\n      // Cleanup on unmount only\n      if (mapInstanceRef.current) {\n        markersRef.current.forEach(marker => marker.remove());\n      }\n    };\n  }, [incidents, userLocation]);\n\n  const getTimeAgo = (date) => {\n    const seconds = Math.floor((new Date() - date) / 1000);\n    \n    if (seconds < 60) return 'Just now';\n    if (seconds < 3600) return `${Math.floor(seconds / 60)} min ago`;\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)} hr ago`;\n    return `${Math.floor(seconds / 86400)} days ago`;\n  };\n\n  return (\n    <div className=\"relative\">\n      {/* Helper Banner */}\n      {showPinHelper && (\n        <div className=\"absolute top-4 left-1/2 transform -translate-x-1/2 z-[1000] bg-blue-600 text-white px-6 py-3 rounded-lg shadow-xl flex items-center gap-3 animate-bounce\">\n          <MapPin className=\"w-5 h-5\" />\n          <span className=\"font-semibold\">Drag the blue pin üìç to your location, then double-click to report</span>\n          <button \n            onClick={() => setShowPinHelper(false)}\n            className=\"ml-2 hover:bg-blue-700 rounded px-2 py-1\"\n          >\n            ‚úï\n          </button>\n        </div>\n      )}\n      <div data-testid=\"map-view\" ref={mapRef} style={{ height: '600px', width: '100%' }} />\n    </div>\n  );\n};\n\nexport default MapView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}